# Учебный проект: Иконка корзины

"Корзина" - компонент интерфейса онлайн магазина или ресторана, в который пользователи добавляют товары для заказа.

В нашем проекте она состоит из двух частей, первая - это компонент "Иконка корзины". Она появляется на странице, когда пользователь добавляет хотя бы один товар в корзину, и исчезает, когда все товары удаляются.

В этой задаче у вас уже есть файл `index.js`, в котором находится класс `CartIcon`, описывающий этот компонент.

Сейчас в нём сделана только "отрисовка" корзины, нужно будет добавить её позиционирование при прокрутке, чтобы иконка корзины всегда была видима.

Исходный файл `index.js`:

```js
import createElement from '../../assets/lib/create-element.js';

export default class CartIcon {
  constructor() {
    this.render();

    this.addEventListeners();
  }

  // Отрисовать пустую иконку корзины
  render() {
    this.elem = createElement('<div class="cart-icon"></div>');
  }

  // Заполнить её данными из объекта cart (объяснено ниже)
  update(cart) {
    if (!cart.isEmpty()) {
      this.elem.classList.add('cart-icon_visible');

      this.elem.innerHTML = `
        <div class="cart-icon__inner">
          <span class="cart-icon__count">${cart.getTotalCount()}</span>
          <span class="cart-icon__price">€${cart.getTotalPrice().toFixed(2)}</span>
        </div>`;

      this.updatePosition();

      this.elem.classList.add('shake');
      this.elem.addEventListener('transitionend', () => {
        this.elem.classList.remove('shake');
      }, {once: true});

    } else {
      this.elem.classList.remove('cart-icon_visible');
    }
  }

  addEventListeners() {
    document.addEventListener('scroll', () => this.updatePosition());
    window.addEventListener('resize', () => this.updatePosition());
  }

  // позиционировать иконку корзины на экране
  updatePosition() {
    // ваш код ...
  }
}
```

Использование иконки корзины:

```js
// создаём иконку
let cartIcon = new CartIcon();

// добавляем на страницу
document.body.append(cartIcon.elem);

// обновляем данными из объекта корзины
cartIcon.update(cart);
```

Давайте внимательно посмотрим на метод `update(cart)`.

## Метод update(cart)

Иконка корзины занимается тем, что красиво отображает справа-сверху количество товаров и их общую стоимость.

Сами данные находятся в объекте корзины `cart`.

У него есть три метода:

```js
let cart = {
  isEmpty() {
    // возвращает true если корзина пуста и false если нет
  },

  getTotalCount() {
    // Возвращает общее количество товаров в корзине
  },

  getTotalPrice() {
    // Возвращает общую сумму всех товаров в корзине
  }
}
```

Если в корзине меняется количество товаров, внешний код сначала обновляет их количество в объекте `cart` таким образом, что методы `isEmpty`, `getTotalCount`, `getTotalPrice` начинают возвращать новые значения. После чего вызывает метод `cartIcon.update(cart)`, который вносит изменения в отображение иконки корзины:

Реальный объект `cart` мы сделаем чуть позже, в файле `index.html` вы можете увидеть упрощённый пример такого объекта корзины.

Как видно из примера в файле `index.html`, базовое отображение корзины уже работает. Но если мы прокрутим страницу вниз, то увидим, что иконка корзины рано или поздно останется наверху и станет недоступной. Хотелось бы, чтобы пользователи видели иконку корзины всегда, независимо от того, как сильно они прокрутили страницу. Это вам и предстоит сделать.

## Метод updatePosition()

Реализуйте метод `updatePosition()`, который будет перемещать иконку корзины вниз и, таким образом, делать её видимой, когда пользователь прокручивает страницу.

В коде `CartIcon`, который уже есть, этот метод уже вызывается в методе `update` и в обработчиках событий `scroll` и `resize` (они добавляются в методе `addEventListeners`).

Так что вам не нужно вызывать его, нужно написать его код.

### Требования к перемещению:

Иконка корзины видима только если в корзине есть товары. Изначально она находится сверху-справа страницы.

Перед тем, как начать перемещение, нужно обязательно убедиться, что иконка корзины **видима** на странице. Это можно сделать, например, проверив метрики `offsetHeight` или `offsetWidth` корневого элемента. Подробнее об этом можно прочитать в разделе - [Размеры и прокрутка элементов: offsetWidth/Height](https://learn.javascript.ru/size-and-scroll#offsetwidth-height)

Начинать перемещение иконки корзины нужно сразу, как только при прокрутке верхний край иконки ушёл за пределы экрана.

**По вертикали:**
- иконка корзины должна отстоять на `50px` от верхнего края экрана.

**По горизонтали иконка должна:**
- отстоять на `20px` справа от первого элемент в документе с классом `container`.
- при этом она должна быть не ближе `10px` от правого края окна.

Если ширина окна браузера меньше или равна `767px`, то **перемещать иконку корзины не нужно вовсе**. Это связанно с тем, что на такой ширине у нас используются другие "мобильные" стили. Вы сами можете в этом убедиться в консоли разработчика.

Увидить поведение иконки в действии вы можете на странице проекта <https://course-jsbasic.javascript.ru>.

Обращаем ваше внимание, что в связи с тем, что это задание может быть решено многими способами, его достаточно сложно проверить автоматически. Поэтому если вы сталкнетесь с ситуацией, что в браузере всё работает как надо, но тесты не проходят, обращайтесь к преподавателю за помощью.